<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>[sns] X í”¼ë“œ ìƒì„±ê¸°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #ffffff;
      --text: #000000;
      --subtext: #657786;
      --tweet-bg: #ffffff;
      --line-color: #e1e8ed;
    }

    body.dark {
      --bg: #15202b;
      --text: #ffffff;
      --subtext: #8899a6;
      --tweet-bg: #192734;
      --line-color: #253341;
    }

    body.black {
      --bg: #000000;
      --text: #e1e8ed;
      --subtext: #5b7083;
      --tweet-bg: #000000;
      --line-color: #222;
    }

    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: "Segoe UI", sans-serif;
      padding: 1em;
      box-sizing: border-box;
      max-width: 600px;
      margin: 0 auto;
    }

    textarea {
      width: 100%;
      font-family: monospace;
      margin-bottom: 0.5em;
      box-sizing: border-box;
      padding: 0.5em;
      border-radius: 4px;
      border: 1px solid var(--line-color);
      background-color: var(--tweet-bg);
      color: var(--text);
    }

    .theme-switcher {
      display: flex;
      gap: 0.5em;
      margin-bottom: 1em;
      flex-wrap: wrap;
    }

    .theme-switcher button {
      padding: 0.5em 1em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .tweet {
      background-color: var(--tweet-bg);
      border: 1px solid var(--line-color);
      border-radius: 10px;
      padding: 1em;
      margin-bottom: 0.5em;
      display: flex;
      gap: 0.75em;
    }

    .thread {
      margin-left: 2em;
    }

    .pfp {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: #ccc;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      overflow: hidden;
    }

    .content {
      flex: 1;
      min-width: 0;
    }

    .header {
      font-weight: bold;
      display: inline;
    }

    .handle {
      color: var(--subtext);
      margin-left: 0.5em;
    }

    .time {
      color: var(--subtext);
      font-size: 0.85em;
      margin-left: 0.5em;
    }

    .stats {
      color: var(--subtext);
      font-size: 0.85em;
      margin-top: 0.5em;
    }

    .photo {
      margin-top: 0.5em;
      padding: 0.5em;
      border: 1px solid var(--line-color);
      border-radius: 6px;
      font-size: 0.9em;
      color: var(--subtext);
      background-color: var(--bg);
    }

    .ooc-section {
      margin-bottom: 1.5em;
    }

    .ooc-header {
      font-weight: bold;
      margin-bottom: 0.5em;
    }

    .ooc-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.25em;
      font-size: 0.9em;
    }

    .ooc-controls button {
      padding: 0.3em 0.8em;
      font-size: 0.9em;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    @media (max-width: 480px) {
      .tweet {
        flex-direction: row;
        padding: 0.75em;
      }

      .pfp {
        width: 40px;
        height: 40px;
        font-size: 20px;
      }

      .thread {
        margin-left: 1.2em;
      }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body class="light">
  <h2>X í”¼ë“œ ìƒì„±ê¸°</h2>
  <small>2025-07-11_02:07</small>
  <!--OOC í¸ì§‘ê¸°-->
  <div class="ooc-section">
    <div class="ooc-header">ğŸ“ ooc í¸ì§‘ê¸°</div>
    <textarea id="ooc-text" rows="4">[oocëª¨ë“œ-ë¡¤í”Œ ì¤‘ì§€. ì•„ë˜ ì–‘ì‹ë§Œ ì±„ì›Œì„œ ì œê³µ]
ë‘ ì‚¬ëŒì´ sns(x,êµ¬ íŠ¸ìœ„í„°)ë¥¼ í•œë‹¤ëŠ” ê°€ì •í•˜ì— ìµœì†Œ 10ê°œ ì´ìƒì˜ íŠ¸ìœ—ì„ ìƒì„±
- ì•„ë˜ ì–‘ì‹ë§Œ ì±„ì›Œ ë‹µë³€(ë‹µê¸€ì€ ì›í•˜ëŠ”ë§Œí¼ ã„´ë¥¼ ì´ìš©í•´ì„œ ì´ì–´ì¤˜

[{@id}â‚©{ë‹‰ë„¤ì„}â‚©{í”„ë¡œí•„ ì´ëª¨ì§€}]
(í•„ìš”í•œ í”„ë¡œí•„ ê°œìˆ˜ë§Œí¼ ë™ì¼ ì–‘ì‹ìœ¼ë¡œ ë°˜ë³µí•´ì„œ ì±„ìš¸ ê²ƒ. ìºë¦­í„°ì™€ ìœ ì € í•„ìˆ˜, í•„ìš”í•  ê²½ìš° ëª¨ë¸Œìº í”„ë¡œí•„ ìƒì„±)

<{@id}â‚©{ë‚´ìš©}â‚©{ë‚ ì§œor nì‹œê°„ ì „}â‚©{rt ìˆ˜}â‚©{í•˜íŠ¸ ìˆ˜}â‚©{ë‹µê¸€ ìˆ˜}â‚©{ì‚¬ì§„ ì„¤ëª…(ìƒëµ ê°€ëŠ¥)}>
ã„´<ë™ì¼ì–‘ì‹. rtìˆ˜,í•˜íŠ¸ ìˆ˜ ìƒëµí•˜ì§€ë§ ê²ƒ>
ã„´ã„´<ë™ì¼ì–‘ì‹></textarea>
    <div class="ooc-controls">
      <span id="char-count">ê¸€ì ìˆ˜: 0</span>
      <button onclick="copyOOC()">ë³µì‚¬</button>
    </div>
  </div>

  <!-- í…Œë§ˆ ì„ íƒ -->
  <div class="theme-switcher">
    <strong>í…Œë§ˆ:</strong>
    <button onclick="setTheme('light')">í° í…Œë§ˆ</button>
    <button onclick="setTheme('dark')">ì–´ë‘ìš´ í…Œë§ˆ</button>
    <button onclick="setTheme('black')">ê²€ì • í…Œë§ˆ</button>
  </div>

   <!-- ì…ë ¥ì°½ & ë²„íŠ¼ -->
  <textarea id="input" placeholder="OOCë¡œ ìƒì„±í•œ í…ìŠ¤íŠ¸ë¥¼ ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”. ì•„ë˜ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.
    
[@Oolongâ‚©ìš°ë¡±â‚©ğŸ¶]
[@Lycosâ‚©ë¼ì´ì½”ìŠ¤â‚©ğŸº]

<@Oolongâ‚©ì˜í–ˆì–´! ë¼ì´ì½”ìŠ¤!â‚©1ì‹œê°„ ì „â‚©0â‚©1â‚©1â‚©(ê°œì”½ì‹œë¥¼ ì¶”ëŠ” í•˜ì–€ ê°•ì•„ì§€ ì‚¬ì§„)>
ã„´<@Lycosâ‚©í¬ë¥´ë¦‰...â‚©30ë¶„ ì „â‚©1â‚©1â‚©1>
ã„´ã„´<@Oolongâ‚©ë–½!! ì£¼ì¸í•œí…Œ ìœ¼ë¥´ë  ê±°ë ¤!â‚©ì§€ê¸ˆâ‚©0â‚©1â‚©0>"></textarea>
  <button onclick="generate()">ë¯¸ë¦¬ë³´ê¸° ìƒì„±</button>
  <button onclick="saveAsImage()">ì´ë¯¸ì§€ ì €ì¥</button>

  <!-- í”„ë¡œí•„ ì—…ë¡œë“œ UI ì˜ì—­ -->
  <div id="profile-upload-container" style="margin-top: 1em; margin-bottom: 1em; border-radius: 1px;"></div>

  <!-- ì¶œë ¥ -->
  <div id="output-wrapper" style="background-color: var(--bg); padding: 1em; border-radius: 10px;">
    <div id="output"></div>
  </div>

  <script>
    let profileMap = {};
    let imageMap = {};

    const oocText = document.getElementById("ooc-text");
    const charCount = document.getElementById("char-count");

    oocText.addEventListener("input", () => {
      charCount.textContent = `ê¸€ì ìˆ˜: ${oocText.value.length}`;
    });
    charCount.textContent = `ê¸€ì ìˆ˜: ${oocText.value.length}`;

    function copyOOC() {
      oocText.select();
      document.execCommand("copy");
      alert("OOC ë‚´ìš©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
    }

    function setTheme(theme) {
      document.body.className = theme;
    }

    function generate() {
      const raw = document.getElementById("input").value.trim();
      const lines = raw.split("\n").filter(line => line.trim() !== "");
      const output = document.getElementById("output");
      const uploadContainer = document.getElementById("profile-upload-container");

      output.innerHTML = "";
      uploadContainer.innerHTML = "";
      profileMap = {};

      // 1. í”„ë¡œí•„ ì •ì˜
      lines.forEach(line => {
        if (line.startsWith("[")) {
          const [id, name, emoji] = line.replace(/[\[\]]/g, "").split("â‚©");
          if (id && name && emoji) {
            const cleanId = id.trim();
            profileMap[cleanId] = { id: cleanId, name, emoji };

            const label = document.createElement("label");
            label.innerHTML = `${name} (${cleanId}) ì´ë¯¸ì§€: `;
            const input = document.createElement("input");
            input.type = "file";
            input.accept = "image/*";
            input.onchange = (e) => {
              const file = e.target.files[0];
              if (file) {
                const reader = new FileReader();
                reader.onload = () => {
                  imageMap[cleanId] = reader.result;
                  generate();
                };
                reader.readAsDataURL(file);
              }
            };
            label.appendChild(input);
            uploadContainer.appendChild(label);
            uploadContainer.appendChild(document.createElement("br"));
          }
        }
      });

      // 2. íŠ¸ìœ— ì²˜ë¦¬
      lines.forEach(line => {
        if (line.startsWith("<") || line.match(/^ã„´+</)) {
          const depth = (line.match(/ã„´/g) || []).length;
          const cleaned = line.replace(/ã„´+/g, "").trim();
          const parts = cleaned.replace(/[<>]/g, "").split("â‚©");

          const [id, text, time, rt, like, reply, photo] = parts;
          const profile = profileMap[id.trim()] || { id: "@unknown", name: "ì´ë¦„ì—†ìŒ", emoji: "â”" };
          const imgSrc = imageMap[profile.id];

          const tweet = document.createElement("div");
          tweet.className = "tweet";
          if (depth > 0) tweet.classList.add("thread");

          tweet.innerHTML = `
            <div class="pfp">
              ${imgSrc ? `<img src="${imgSrc}" style="width:100%; height:100%; object-fit:cover; border-radius:50%;">` : profile.emoji}
            </div>
            <div class="content">
              <div>
                <span class="header">${profile.name}</span>
                <span class="handle">${profile.id}</span>
                <span class="time">${time || ""}</span>
              </div>
              <div>${text}</div>
              ${photo ? `<div class="photo">ğŸ“· ${photo}</div>` : ""}
              <div class="stats">ğŸ” ${rt || 0} Â· â¤ï¸ ${like || 0} Â· ğŸ’¬ ${reply || 0}</div>
            </div>
          `;
          output.appendChild(tweet);
        }
      });
    }

    function saveAsImage() {
      const outputWrapper = document.getElementById("output-wrapper");
      html2canvas(outputWrapper, {
        backgroundColor: null
      }).then(canvas => {
        const link = document.createElement("a");
        const now = new Date();
        const timestamp = now.getFullYear().toString()
          + ("0" + (now.getMonth() + 1)).slice(-2)
          + ("0" + now.getDate()).slice(-2)
          + "_"
          + ("0" + now.getHours()).slice(-2)
          + ("0" + now.getMinutes()).slice(-2)
          + ("0" + now.getSeconds()).slice(-2);
        link.download = `createdtwitter_${timestamp}.png`;
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    }
  </script>
</body>
</html>
